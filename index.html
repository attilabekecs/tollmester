<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TollMester</title>

  <!-- ===== CSS modulok ===== -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/editor.css">
  <link rel="stylesheet" href="css/preview.css">
  <link rel="stylesheet" href="css/characters.css">
  <link rel="stylesheet" href="css/character-profile.css">
</head>

<body data-theme="dark">
<div class="app">

<!-- ================= HEADER ================= -->
<header>
  <div class="brand"><div class="logo"></div> TollMester</div>
  <div class="toolbar">
    <input id="globalSearch" class="input" placeholder="Gyors keresÃ©sâ€¦" />
    <button class="btn small ghost" id="themeToggle">ğŸŒ— TÃ©ma</button>
    <button class="btn small" id="exportBtn">â¬‡ï¸ Export</button>
    <label class="btn small ghost">
      â¬†ï¸ Import
      <input id="importInput" type="file" hidden>
    </label>
    <button class="btn small danger" id="resetBtn">ğŸ—‘ï¸ Reset</button>
  </div>
</header>

<!-- ================= APP LAYOUT ================= -->
<div class="layout">
<div class="workbench panel">

<!-- ===== SIDEBAR ===== -->
<nav>
  <a class="nav-item" data-route="characters" aria-current="page">ğŸ§‘â€ğŸ¤ SzereplÅ‘k</a>
  <a class="nav-item" data-route="locations">ğŸ“ HelyszÃ­nek</a>
  <a class="nav-item" data-route="powers">âœ¨ ErÅ‘k</a>
  <a class="nav-item" data-route="timeline">ğŸ—“ï¸ IdÅ‘vonal</a>
  <a class="nav-item" data-route="chapters">ğŸ“š Fejezetek</a>
  <a class="nav-item" data-route="notes">ğŸ“ Jegyzetek</a>
  <a class="nav-item" data-route="graph">ğŸ•¸ï¸ Kapcsolati hÃ¡lÃ³</a>
  <a class="nav-item" data-route="preview">ğŸ“– ElÅ‘nÃ©zet</a>
</nav>

<!-- ===== MAIN ===== -->
<main>

<!-- CHARACTERS -->
<section class="view active" id="view-characters">
  <div class="panel">
    <div class="head">
      <div class="row">
        <input id="charSearch" class="input" placeholder="KeresÃ©sâ€¦" />
        <select id="charSort" class="input">
          <option value="name">NÃ©v szerint</option>
          <option value="role">Szerep szerint</option>
          <option value="created">LÃ©trehozÃ¡s</option>
        </select>
      </div>
      <button class="btn primary" id="addCharacter">+ Ãšj szereplÅ‘</button>
    </div>
    <div class="body">
      <div id="characterCards" class="cards"></div>
    </div>
  </div>
</section>
  
  <dialog id="characterDialog" class="editor-dialog">
  <h2>SzereplÅ‘ szerkesztÃ©se</h2>

  <label>NÃ©v</label>
  <input id="chName" type="text">

  <label>KÃ©p URL</label>
  <input id="chImage" type="text">

  <label>LeÃ­rÃ¡s</label>
  <textarea id="chBio" rows="6"></textarea>

  <div class="dialog-actions">
    <button id="chCancel">MÃ©gse</button>
    <button id="chSave">MentÃ©s</button>
  </div>
</dialog>

  <dialog id="characterProfile" class="profile-dialog">
  <div class="profile-grid">
    
    <img id="profileImage">

    <div class="profile-info">
      <h2 id="profileName"></h2>
      <p id="profileBio"></p>

      <div class="profile-meta">
        <span id="profileCreated"></span>
        <span id="profileUpdated"></span>
      </div>

      <div class="profile-actions">
        <button id="profileEdit">SzerkesztÃ©s</button>
        <button id="profileDelete">TÃ¶rlÃ©s</button>
        <button id="profileClose">BezÃ¡r</button>
      </div>
    </div>

  </div>
</dialog>


<!-- CHAPTERS (editor ide marad) -->
<section class="view" id="view-chapters">
  <div class="chapters">
    <div class="editor">
      <div class="toolbar row">
        <button class="btn small primary" id="addChapter">+ Ãšj</button>
        <select id="chapterSelect" class="input small"></select>
        <input id="chapterTitle" class="input" placeholder="Fejezet cÃ­me" />
        <span class="spacer"></span>
        <button class="btn small" id="chapterSave">ğŸ’¾ MentÃ©s</button>
      </div>

      <div class="editor-area">
        <div class="paper">
          <div class="paper-inner">
            <div id="chapterEditor" class="rte" contenteditable="true"></div>
          </div>
        </div>
      </div>

      <aside class="chapter-notes-sidebar">
        <div id="cnsList" class="cns-list"></div>
      </aside>

    </div>
  </div>
</section>

</main>
</div>
</div>

</div>

<!-- ===== NAV ROUTER ===== -->
<script>
(function(){
  const nav=document.querySelector('.workbench nav');
  function show(r){
    document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
    document.getElementById('view-'+r)?.classList.add('active');
  }
  nav.addEventListener('click',e=>{
    const a=e.target.closest('.nav-item');
    if(!a)return;
    location.hash=a.dataset.route;
  });
  window.addEventListener('hashchange',()=>show(location.hash.replace('#','')));
})();
</script>

<!-- ===== JS ENTRY ===== -->
<script type="module" src="js/main.js"></script>

</body>
</html>

